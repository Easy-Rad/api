<div class="is-pulled-right">Updated: {{ data.updated | format_epoch }}</div>
{% for title in ("Radiologists", "Registrars and Fellows") %}
    <h5 class="subtitle">{{ title }}</h5>
    <div class="fixed-grid has-3-cols">
        <div class="grid is-gap-1">
            {% for ip, desk in data.desks.items() %}
            {% for uid in desk.users %}
            {% with user=data.users[uid] %}
            {% if user.pacs_presence != 'offline' and user.radiologist == (title == "Radiologists") %}
            <div class="cell">
                <div class="box p-2">
                    <span class="icon-text"><span class="icon has-text-{{ user.pacs_presence | presence_icon_class }}"><i class="fa-solid fa-{{ user.pacs_presence | presence_icon }}"></i></span><span>{{ user.first_name }} {{ user.last_name }}</span></span>
                    <span class="icon-text"><span class="icon"><i class="fa-solid fa-briefcase-medical"></i></span><span>{{ user.specialty }}</span></span>
                    <span class="icon-text"><span class="icon"><i class="fa-solid fa-desktop"></i></span><span>{{ desk.name }}</span></span>
                    <span class="icon-text"><span class="icon"><i class="fa-solid fa-phone"></i></span><span>{{ desk.phone }}</span></span>
                    <span class="icon-text"><span class="icon"><i class="fa-solid fa-clock"></i></span><span>{{ user | last_status }}</span></span>
                </div>
            </div>
            {% endif %}
            {% endwith %}
            {% endfor %}
            {% endfor %}
            {% for uid in data.offsite %}
            {% with user=data.users[uid] %}
            {% if user.pacs_presence != 'offline' and user.radiologist == (title == "Radiologists") %}
            <div class="cell">
                <div class="box p-2">
                    <span class="icon-text"><span class="icon has-text-{{ user.pacs_presence | presence_icon_class }}"><i class="fa-solid fa-{{ user.pacs_presence | presence_icon }}"></i></span><span>{{ user.first_name }} {{ user.last_name }}</span></span>
                    <span class="icon-text"><span class="icon"><i class="fa-solid fa-briefcase-medical"></i></span><span>{{ user.specialty }}</span></span>
                    <span class="icon-text"><span class="icon"><i class="fa-solid fa-globe"></i></span><span>Offsite</span></span>
                    <span class="icon-text"><span class="icon"><i class="fa-solid fa-clock"></i></span><span>{{ user | last_status }}</span></span>
                </div>
            </div>
            {% endif %}
            {% endwith %}
            {% endfor %}
        </div>
    </div>
{% endfor %}
<h5 class="subtitle">Available desks ({{ data.desks | length }})</h5>
<div class="tags">
    {% for desk in data.desks.values() %}
        {% if desk.available %}
        <span class="tag icon-text">
            <span class="icon has-text-{{ 'warning' if desk.users | length else 'success' if desk.online else 'grey' }}">
                <i class="fa-solid fa-{{ 'user' if desk.users | length else 'desktop' }}"></i>
            </span>
            <span>{{ desk.name }}</span>
        </span>
        {% endif %}
    {% endfor %}
</div>